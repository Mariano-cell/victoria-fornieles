<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CORA – Victoria F.</title>

    <link rel="icon" href="../assets/logo/favicon-v2.png" type="image/png">

    <link rel="stylesheet" href="../css/loader.css" />
    <link rel="stylesheet" href="../css/tokens.css" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/project.css" />

    <meta name="description" content="Proyecto CORA – Portfolio de Victoria Fornieles." />
</head>

<body class="page page--project">

    <header class="site-header" aria-label="Encabezado del sitio">
        <div class="site-header__inner">
            <div class="site-header__left">
                <a class="brand" href="../index.html" aria-label="Ir al inicio">
                    <span class="brand__name" data-typewriter="logo" aria-label="Victoria Fornieles">
                        <span class="brand__ghost" aria-hidden="true">VICTORIA <br>FORNIELES</span>
                        <span class="brand__live">VICTORIA <br>FORNIELES</span>
                    </span>
                </a>
            </div>
        </div>
    </header>

    <main class="site-main" aria-label="Contenido principal">
        <section class="project" aria-label="Proyecto Cora">

            <div class="project-viewer" data-project="cora">

                <h1 class="project-title project-title--mobile">03 /<br>CORA</h1>

                <div class="project-viewer__track">

                    <button class="project-nav project-nav--prev" type="button" aria-label="Foto anterior">
                        <span class="project-nav__icon" aria-hidden="true">
                            <img src="../assets/img/ui/arrows/arrow-left.svg" alt="">
                        </span>
                    </button>

                    <div class="project-stage">
                        <h1 class="project-title">03 /<br>CORA</h1>

                        <figure class="project-figure">
                            <div class="project-media" aria-hidden="true">
                                <img class="project-img" src="../assets/img/projects/bambu/poster-x3.jpg" alt=""
                                    decoding="async" fetchpriority="high" />
                            </div>
                        </figure>

                        <span class="project-category">DISEÑO</span>
                    </div>

                    <button class="project-nav project-nav--next" type="button" aria-label="Foto siguiente">
                        <span class="project-nav__icon" aria-hidden="true">
                            <img src="../assets/img/ui/arrows/arrow-right.svg" alt="">
                        </span>
                    </button>

                </div>

                <span class="project-category project-category--mobile"></span>

            </div>
        </section>
    </main>

    <script src="../js/loader.js"></script>
    <script src="../js/project-loader.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/project-gallery.js"></script>




    <script>
        (() => {
            const t0 = performance.now();
            const log = (label) => console.log(`[${Math.round(performance.now() - t0)}ms] ${label}`);

            log("script corre");
            document.addEventListener("DOMContentLoaded", () => log("DOMContentLoaded"));
            window.addEventListener("load", () => log("window.load"));

            // Clases del body
            new MutationObserver(() => {
                log(`body.class → "${document.body.className}"`);
            }).observe(document.body, { attributes: true, attributeFilter: ["class"] });

            // Loader: aparece, recibe is-hidden, se elimina
            const loaderObserver = new MutationObserver(() => {
                const loader = document.querySelector(".page-loader");
                if (!loader) return;
                log("loader en DOM");
                loaderObserver.disconnect();

                new MutationObserver(() => {
                    if (loader.classList.contains("is-hidden")) log("loader.is-hidden → fade-out empieza");
                }).observe(loader, { attributes: true, attributeFilter: ["class"] });

                new MutationObserver(() => {
                    if (!document.querySelector(".page-loader")) log("✅ loader removido");
                }).observe(document.body, { childList: true, subtree: true });
            });
            loaderObserver.observe(document.body, { childList: true, subtree: true });

            // Links CSS que se cargan dinámicamente
            new MutationObserver((mutations) => {
                mutations.forEach(m => m.addedNodes.forEach(n => {
                    if (n.tagName === "LINK") log(`<link> inyectado: ${n.href.split("/").pop()}`);
                    if (n.tagName === "SCRIPT") log(`<script> inyectado: ${n.src.split("/").pop()}`);
                }));
            }).observe(document.head, { childList: true });

        })();
    </script>

</body>

</html>