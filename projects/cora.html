<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CORA — Victoria F.</title>

    <link rel="icon" href="../assets/logo/favicon-v2.png" type="image/png">

    <link rel="stylesheet" href="../css/tokens.css" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/project.css" />

    <meta name="description" content="Proyecto CORA — Portfolio de Victoria Fornieles." />
</head>

<body class="page page--project">

    <header class="site-header" aria-label="Encabezado del sitio">
        <div class="site-header__inner">
            <div class="site-header__left">
                <a class="brand" href="../index.html" aria-label="Ir al inicio">
                    <span class="brand__name" data-typewriter="logo" aria-label="Victoria Fornieles">
                        <span class="brand__ghost" aria-hidden="true">VICTORIA <br>FORNIELES</span>
                        <span class="brand__live">VICTORIA <br>FORNIELES</span>
                    </span>
                </a>
            </div>

        </div>

    </header>

    <main class="site-main" aria-label="Contenido principal">
        <section class="project" aria-label="Proyecto Cora">

            <div class="project-viewer" data-project="cora">

                <!-- Título móvil: encima del carrusel, oculto en desktop -->
                <h1 class="project-title project-title--mobile">03 /<br>CORA</h1>

                <!-- Fila: botón prev + stage + botón next -->
                <div class="project-viewer__track">

                    <button class="project-nav project-nav--prev" type="button" aria-label="Foto anterior">
                        <span class="project-nav__icon" aria-hidden="true">
                            <img src="../assets/img/ui/arrows/arrow-left.svg" alt="">
                        </span>
                    </button>

                    <div class="project-stage">
                        <!-- project-title y project-category: solo visibles en desktop -->
                        <h1 class="project-title">03 /<br>CORA</h1>

                        <figure class="project-figure">
                            <div class="project-media" aria-hidden="true">
                                <img class="project-img" src="../assets/img/projects/bambu/poster-x3.jpg" alt=""
                                    decoding="async" fetchpriority="high" />
                            </div>
                        </figure>

                        <span class="project-category">DISEÑO</span>
                    </div>

                    <button class="project-nav project-nav--next" type="button" aria-label="Foto siguiente">
                        <span class="project-nav__icon" aria-hidden="true">
                            <img src="../assets/img/ui/arrows/arrow-right.svg" alt="">
                        </span>
                    </button>

                </div>

                <!-- Category móvil: debajo del carrusel, oculta en desktop -->
                <span class="project-category project-category--mobile"></span>

            </div>
        </section>
    </main>

    <script src="../js/loader.js"></script>
    <script src="../js/project-loader.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/project-gallery.js"></script>




    <!-- 
  DIAGNÓSTICO CORA.HTML
  Pegá este bloque completo justo antes del </body> en cora.html,
  reemplazando el snippet anterior.
  Abrí DevTools > Console, recargá la página y pegá los logs acá.
-->
    <script>
        (() => {
            const t0 = performance.now();
            const logs = [];
            const log = (label) => {
                const ms = Math.round(performance.now() - t0);
                logs.push(`[${ms}ms] ${label}`);
                console.log(`[${ms}ms] ${label}`);
            };

            log("▶ script diagnóstico corre");

            // ── EVENTOS GLOBALES ─────────────────────────────────────
            document.addEventListener("DOMContentLoaded", () => log("DOMContentLoaded"));
            window.addEventListener("load", () => log("window.load"));

            // ── IMAGEN PRINCIPAL ─────────────────────────────────────
            const img = document.querySelector(".project-img");
            if (img) {
                log(`img encontrada | complete=${img.complete} | naturalWidth=${img.naturalWidth} | src=${img.src.split("/").pop()}`);
                if (!img.complete) {
                    img.addEventListener("load", () => log("✅ img.load"));
                    img.addEventListener("error", () => log("❌ img.error"));
                }
            } else {
                log("⚠️ .project-img NO encontrada");
            }

            // ── LOADER EN DOM ────────────────────────────────────────
            const loaderObserver = new MutationObserver(() => {
                const loader = document.querySelector(".page-loader");
                if (loader) {
                    log("loader inyectado en DOM");
                    loaderObserver.disconnect();

                    // Detectar cuando se le agrega is-hidden
                    const hiddenObserver = new MutationObserver(() => {
                        if (loader.classList.contains("is-hidden")) {
                            log("loader.is-hidden agregado → empieza fade-out");
                            hiddenObserver.disconnect();
                        }
                    });
                    hiddenObserver.observe(loader, { attributes: true, attributeFilter: ["class"] });

                    // Detectar cuando se remueve del DOM
                    const removeObserver = new MutationObserver(() => {
                        if (!document.querySelector(".page-loader")) {
                            log("loader removido del DOM");
                            removeObserver.disconnect();
                        }
                    });
                    removeObserver.observe(document.body, { childList: true, subtree: true });
                }
            });
            loaderObserver.observe(document.body, { childList: true, subtree: true });

            // ── CLASES DEL BODY ──────────────────────────────────────
            const bodyObserver = new MutationObserver(() => {
                const classes = document.body.className;
                log(`body.class cambió → "${classes}"`);
                if (classes.includes("is-ready")) {
                    log("✅ is-ready agregado");
                }
            });
            bodyObserver.observe(document.body, { attributes: true, attributeFilter: ["class"] });

            // ── SCRIPTS QUE CARGAN ───────────────────────────────────
            // Detectar cuándo termina de parsear cada script
            ["loader.js", "project-loader.js", "main.js", "project-gallery.js"].forEach(name => {
                const scripts = Array.from(document.querySelectorAll("script"));
                const s = scripts.find(el => el.src && el.src.includes(name));
                if (s) {
                    log(`script encontrado en DOM: ${name}`);
                } else {
                    log(`⚠️ script NO encontrado: ${name}`);
                }
            });

            // ── VISIBILIDAD REAL DEL CONTENIDO ───────────────────────
            // Qué tan pronto el .project-stage es visible para el usuario
            const checkVisible = () => {
                const stage = document.querySelector(".project-stage");
                if (!stage) return;
                const style = window.getComputedStyle(stage);
                log(`project-stage | opacity=${style.opacity} | visibility=${style.visibility} | display=${style.display}`);
            };

            // Chequear visibilidad en distintos momentos
            [0, 100, 300, 500, 800, 1000, 1500, 2000, 3000].forEach(delay => {
                setTimeout(() => {
                    const stage = document.querySelector(".project-stage");
                    if (!stage) return;
                    const style = window.getComputedStyle(stage);
                    const loaderStillHere = !!document.querySelector(".page-loader");
                    log(`@${delay}ms → stage opacity=${style.opacity} | loader=${loaderStillHere ? "presente" : "removido"}`);
                }, delay);
            });

            // ── RESUMEN FINAL ────────────────────────────────────────
            setTimeout(() => {
                console.log("\n═══ RESUMEN DIAGNÓSTICO ═══");
                logs.forEach(l => console.log(l));
                console.log("═══════════════════════════\n");
            }, 3500);
        })();
    </script>
</body>

</html>